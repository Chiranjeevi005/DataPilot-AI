INFO:jobs.process_job:Starting processing for job test_phase6_job (file: file:///C:/Users/Chiranjeevi%20PK/Desktop/datapilot-ai/tmp_uploads/test_phase6_job/data.csv)
C:\Users\Chiranjeevi PK\Desktop\datapilot-ai\src\jobs\process_job.py:183: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
  current['updatedAt'] = datetime.utcnow().isoformat() + "Z"
INFO:lib.storage:Ensuring local path for file:///C:/Users/Chiranjeevi%20PK/Desktop/datapilot-ai/tmp_uploads/test_phase6_job/data.csv
INFO:jobs.process_job:Detected file type: csv
INFO:jobs.process_job:Parsed DataFrame: (3, 3)
C:\Users\Chiranjeevi PK\Desktop\datapilot-ai\src\lib\analysis.py:116: UserWarning: Could not infer format, so each element will be parsed individually, falling back to `dateutil`. To ensure parsing is consistent and as-expected, please specify a format.
  converted = pd.to_datetime(sample, errors='coerce')
INFO:jobs.process_job:Generating LLM insights...
INFO:lib.llm_client:LLM_MOCK=true, returning canned insights.
C:\Users\Chiranjeevi PK\Desktop\datapilot-ai\src\jobs\process_job.py:156: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
  "processedAt": datetime.utcnow().isoformat() + "Z"
INFO:lib.storage:Saved file locally for job test_phase6_job at C:\Users\Chiranjeevi PK\Desktop\datapilot-ai\tmp_uploads\test_phase6_job\result.json
C:\Users\Chiranjeevi PK\Desktop\datapilot-ai\src\jobs\process_job.py:190: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
  current['updatedAt'] = datetime.utcnow().isoformat() + "Z"
INFO:jobs.process_job:Job test_phase6_job completed successfully. Result: file:///C:/Users/Chiranjeevi%20PK/Desktop/datapilot-ai/tmp_uploads/test_phase6_job/result.json
.INFO:jobs.process_job:Starting processing for job test_phase6_job_fail (file: file:///C:/Users/Chiranjeevi%20PK/Desktop/datapilot-ai/tmp_uploads/test_phase6_job/data.csv)
C:\Users\Chiranjeevi PK\Desktop\datapilot-ai\src\jobs\process_job.py:183: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
  current['updatedAt'] = datetime.utcnow().isoformat() + "Z"
INFO:lib.storage:Ensuring local path for file:///C:/Users/Chiranjeevi%20PK/Desktop/datapilot-ai/tmp_uploads/test_phase6_job/data.csv
INFO:jobs.process_job:Detected file type: csv
INFO:jobs.process_job:Parsed DataFrame: (3, 3)
C:\Users\Chiranjeevi PK\Desktop\datapilot-ai\src\lib\analysis.py:116: UserWarning: Could not infer format, so each element will be parsed individually, falling back to `dateutil`. To ensure parsing is consistent and as-expected, please specify a format.
  converted = pd.to_datetime(sample, errors='coerce')
INFO:jobs.process_job:Generating LLM insights...
C:\Users\Chiranjeevi PK\Desktop\datapilot-ai\src\jobs\process_job.py:156: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
  "processedAt": datetime.utcnow().isoformat() + "Z"
INFO:lib.storage:Saved file locally for job test_phase6_job_fail at C:\Users\Chiranjeevi PK\Desktop\datapilot-ai\tmp_uploads\test_phase6_job_fail\result.json
C:\Users\Chiranjeevi PK\Desktop\datapilot-ai\src\jobs\process_job.py:190: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
  current['updatedAt'] = datetime.utcnow().isoformat() + "Z"
INFO:jobs.process_job:Job test_phase6_job_fail completed successfully. Result: file:///C:/Users/Chiranjeevi%20PK/Desktop/datapilot-ai/tmp_uploads/test_phase6_job_fail/result.json
.
----------------------------------------------------------------------
Ran 2 tests in 0.111s

OK

--- Testing Happy Path (Mock LLM) ---
Result Keys: ['jobId', 'fileInfo', 'schema', 'kpis', 'cleanedPreview', 'analystInsights', 'chartSpecs', 'qualityScore', 'issues', 'processedAt']
Happy path passed: Insights generated.

--- Testing Failure Path ---
Failure path passed: Issues recorded.
